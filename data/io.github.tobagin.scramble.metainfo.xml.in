<?xml version="1.0" encoding="UTF-8"?>
<component type="desktop-application">
  <id>@APP_ID@</id>
  <metadata_license>CC0-1.0</metadata_license>
  <project_license>GPL-3.0-or-later</project_license>
  <name>@APP_NAME@</name>
  <summary>Privacy-focused image metadata removal tool</summary>

  <icon type="stock">@APP_ID@</icon>
  <description>
    <p>
      Scramble is a simple, privacy-focused utility for viewing and removing 
      metadata from images. The application provides a clean, intuitive interface 
      featuring a user-friendly drag-and-drop workflow for metadata inspection 
      and removal.
    </p>
    <p>
      Key features:
    </p>
    <ul>
      <li>View detailed image metadata (EXIF, IPTC, XMP)</li>
      <li>One-click metadata removal</li>
      <li>Drag-and-drop image loading</li>
      <li>Non-destructive workflow - originals are never modified</li>
      <li>Offline operation - no data collection</li>
      <li>Support for JPEG, PNG, TIFF, WebP, HEIF, and HEIC formats</li>
    </ul>
  </description>
  
  <screenshots>
    <screenshot type="default">
      <image>https://raw.githubusercontent.com/tobagin/scramble/main/data/screenshots/main-window.png</image>
      <caption>Main window with clean interface ready for image loading</caption>
    </screenshot>
    <screenshot>
      <image>https://raw.githubusercontent.com/tobagin/scramble/main/data/screenshots/image-with-metadata.png</image>
      <caption>Image loaded with detailed metadata inspection view</caption>
    </screenshot>
    <screenshot>
      <image>https://raw.githubusercontent.com/tobagin/scramble/main/data/screenshots/image-cleaned.png</image>
      <caption>After cleaning - metadata removed while preserving image quality</caption>
    </screenshot>
    <screenshot>
      <image>https://raw.githubusercontent.com/tobagin/scramble/main/data/screenshots/about.png</image>
      <caption>About dialog with release notes and keyboard shortcuts</caption>
    </screenshot>
  </screenshots>
  
  <url type="homepage">https://github.com/tobagin/scramble</url>
  <url type="bugtracker">https://github.com/tobagin/scramble/issues</url>
  <url type="help">https://github.com/tobagin/scramble/discussions</url>
  <url type="donation">https://github.com/sponsors/tobagin</url>
  <url type="contact">https://github.com/tobagin</url>
  <url type="contribute">https://github.com/tobagin/scramble</url>
  
  <developer id="io.github.tobagin">
    <name>Thiago Fernandes</name>
  </developer>
  
  <launchable type="desktop-id">@APP_ID@.desktop</launchable>

  <provides>
    <binary>scramble</binary>
  </provides>
  
  <releases>
    <release version="1.2.1" date="2025-10-20">
      <description>
        <p>üîí Security and Stability Update</p>
        <p>Security Enhancements:</p>
        <ul>
          <li>Enhanced file format validation with magic number checking - prevents processing of malicious files with fake extensions</li>
          <li>Improved symlink handling to prevent security vulnerabilities (TOCTOU attacks)</li>
          <li>Replaced regex-based error sanitization to prevent ReDoS attacks</li>
          <li>Removed unused network permission for better privacy posture</li>
          <li>Added comprehensive security logging for validation events</li>
        </ul>
        <p>New Internal Features:</p>
        <ul>
          <li>Magic number validation for JPEG, PNG, WebP, TIFF, HEIF/HEIC formats</li>
          <li>Development-only setting to allow symlinks for testing purposes</li>
          <li>New Constants and MagicNumberValidator utility classes</li>
        </ul>
        <p>Code Quality:</p>
        <ul>
          <li>Improved error messages with path disclosure prevention</li>
          <li>Enhanced file validation in batch processing</li>
          <li>Better separation of security concerns across codebase</li>
        </ul>
      </description>
    </release>
    <release version="1.2.0" date="2025-10-08">
      <description>
        <p>üöÄ Major Feature Release - Enhanced Workflow &amp; Batch Operations</p>
        <p>New Features:</p>
        <ul>
          <li>Batch Processing (Ctrl+B) - Process multiple images at once with progress tracking and detailed reports</li>
          <li>Before/After Comparison View (Ctrl+R) - Side-by-side preview with adjustable split pane</li>
          <li>Metadata Export (Ctrl+E) - Export metadata to JSON (grouped) or CSV (tabular) formats</li>
          <li>Modern shortcuts dialog using Adw.ShortcutsDialog with automatic accelerator display</li>
        </ul>
        <p>Critical Bug Fixes:</p>
        <ul>
          <li>Fixed 0-byte file save bug in Flatpak by implementing GFile-based portal operations</li>
          <li>Fixed batch processing crashes by removing unsafe threading (GdkPixbuf thread-safety)</li>
          <li>Fixed TIFF save failure - now auto-converts to PNG (lossless)</li>
          <li>Restored WebP output support with high-quality compression</li>
        </ul>
        <p>Code Quality Improvements:</p>
        <ul>
          <li>Resolved 49 deprecated API warnings - migrated to modern GTK4/LibAdwaita APIs</li>
          <li>Removed 1,700+ lines of duplicate HEIF implementation code</li>
          <li>Split window.vala (579‚Üí278 lines) into 4 modular components</li>
          <li>Added comprehensive input validation and security checks</li>
          <li>Implemented secure memory clearing for sensitive data</li>
        </ul>
        <p>Technical Details:</p>
        <ul>
          <li>All file operations now use GFile API for Flatpak portal compatibility</li>
          <li>Output formats: JPEG (95% quality), PNG (lossless), WebP (95% quality)</li>
          <li>TIFF and HEIF/HEIC inputs automatically convert to supported output formats</li>
          <li>Enhanced error handling with sanitized user-facing messages</li>
        </ul>
      </description>
    </release>
    <release version="1.1.2" date="2025-09-18">
      <description>
        <p>üêõ Bug Fixes and Improvements</p>
        <p>Bug Fixes:</p>
        <ul>
          <li>Fixed production build commit hash mismatch in Flatpak manifest</li>
          <li>Resolved CMake policy compatibility issue with libde265 dependency</li>
        </ul>
        <p>Improvements:</p>
        <ul>
          <li>Enhanced build stability and reliability</li>
          <li>Better build system error handling</li>
        </ul>
      </description>
    </release>
    <release version="1.1.1" date="2025-09-18">
      <description>
        <p>üì¶ Runtime Update</p>
        <ul>
          <li>Updated to GNOME Platform runtime version 49</li>
        </ul>
      </description>
    </release>
    <release version="1.1.0" date="2025-09-16">
      <description>
        <p>‚ú® HEIF and HEIC Image Format Support</p>
        <p>New Features:</p>
        <ul>
          <li>Added comprehensive HEIF/HEIC format support with modern compression technology</li>
          <li>Full Apple HEIC compatibility for iPhone and iPad photos</li>
          <li>Multi-image HEIF sequence support with primary image display</li>
          <li>Complete EXIF, XMP, and IPTC metadata extraction from HEIF/HEIC files</li>
          <li>Enhanced file format detection with header analysis</li>
        </ul>
        <p>Technical Improvements:</p>
        <ul>
          <li>Integrated libheif and libde265 libraries for native HEIF processing</li>
          <li>Enabled BMFF (Base Media File Format) support in Exiv2</li>
          <li>Implemented modular contract-based architecture for extensibility</li>
          <li>Enhanced UI with HEIF/HEIC MIME type support in file dialogs</li>
          <li>Maintained privacy-first design with offline-only operation</li>
        </ul>
      </description>
    </release>
    <release version="1.0.1" date="2025-09-15">
      <description>
        <p>Bug fixes and improvements for Flathub submission</p>
        <ul>
          <li>Fixed metainfo launchable element for proper desktop integration</li>
          <li>Optimized Flatpak manifest with global cleanup rules</li>
          <li>Enhanced security by removing filesystem permissions and using file portals</li>
          <li>Improved manifest structure following Flatpak best practices</li>
          <li>Updated documentation with comprehensive installation and usage instructions</li>
        </ul>
      </description>
    </release>
    <release version="1.0.0" date="2025-09-15">
      <description>
        <p>Initial release of Scramble - A modern, privacy-focused image metadata removal tool</p>
        <ul>
          <li>Complete metadata viewing with organized display of EXIF, XMP, and IPTC data</li>
          <li>One-click metadata removal that preserves image quality</li>
          <li>Intuitive drag-and-drop interface for easy image loading</li>
          <li>Modern GTK4/LibAdwaita interface with clean 50/50 layout</li>
          <li>Header bar integration with context-sensitive controls</li>
          <li>Comprehensive keyboard shortcuts for all major actions</li>
          <li>Expandable raw metadata view with smart expansion control</li>
          <li>Automatic "What's New" dialog for version updates</li>
          <li>Privacy-focused design with offline operation</li>
          <li>Support for JPEG, PNG, TIFF, and WebP image formats</li>
          <li>Non-destructive workflow - originals are never modified</li>
        </ul>
      </description>
    </release>
  </releases>
  
  <content_rating type="oars-1.1"/>
  
  <categories>
    <category>Graphics</category>
    <category>Photography</category>
    <category>Utility</category>
  </categories>
  
  <keywords>
    <keyword>metadata</keyword>
    <keyword>exif</keyword>
    <keyword>privacy</keyword>
    <keyword>image</keyword>
    <keyword>photo</keyword>
  </keywords>
</component>
