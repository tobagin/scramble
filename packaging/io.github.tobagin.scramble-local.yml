app-id: io.github.tobagin.scramble
runtime: org.gnome.Platform
runtime-version: '48'
sdk: org.gnome.Sdk
command: scramble
finish-args:
  - --socket=wayland
  - --socket=fallback-x11
  - --share=ipc
  - --device=dri
  - --share=network
  - --filesystem=xdg-pictures:rw
  - --filesystem=xdg-documents:rw
  - --filesystem=xdg-desktop:rw
  - --filesystem=xdg-download:rw

modules:
  - name: blueprint-compiler
    buildsystem: meson
    sources:
      - type: git
        url: https://gitlab.gnome.org/jwestman/blueprint-compiler.git
        tag: v0.18.0
        commit: 07c9c9df9cd1b6b4454ecba21ee58211e9144a4b

  - name: python3-piexif
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} piexif --no-build-isolation
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/2c/d8/6f63147dd73373d051c5eb049ecd841207f898f50a5a1d4378594178f6cf/piexif-1.1.3-py2.py3-none-any.whl
        sha256: 3bc435d171720150b81b15d27e05e54b8abbde7b4242cddd81ef160d283108b6

  - name: python3-pillow
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} pillow --no-build-isolation
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/e4/c9/06dd4a38974e24f932ff5f98ea3c546ce3f8c995d3f0985f8e5ba48bba19/pillow-11.3.0-cp312-cp312-manylinux_2_27_x86_64.manylinux_2_28_x86_64.whl
        sha256: 676b2815362456b5b3216b4fd5bd89d362100dc6f4945154ff172e206a22c024
      - type: file
        url: https://files.pythonhosted.org/packages/41/f1/6f2427a26fc683e00d985bc391bdd76d8dd4e92fac33d841127eb8fb2313/pillow-11.3.0-cp312-cp312-manylinux_2_27_aarch64.manylinux_2_28_aarch64.whl
        sha256: 97f07ed9f56a3b9b5f49d3661dc9607484e85c67e27f3e8be2c7d28ca032fec7

  - name: scramble
    buildsystem: meson
    sources:
      - type: dir
        path: ..